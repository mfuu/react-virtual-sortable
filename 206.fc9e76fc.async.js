"use strict";(self.webpackChunkreact_virtual_sortable=self.webpackChunkreact_virtual_sortable||[]).push([[206],{62206:function(_t,W,h){h.r(W),h.d(W,{default:function(){return tt}});var Ue=h(9783),p=h.n(Ue),Me=h(19632),K=h.n(Me),Ne=h(97857),m=h.n(Ne),He=h(5574),Y=h.n(He),d=h(67294),Le=h(12444),P=h.n(Le),je=h(72004),X=h.n(je),Ve=h(26867),T=h.n(Ve);function G(n,r){var e,t=function(){for(var i=this,a=arguments.length,u=new Array(a),S=0;S<a;S++)u[S]=arguments[S];e||(r<=0?n.apply(this,u):e=setTimeout(function(){e=null,n.apply(i,u)},r))};return t.cancel=function(){e&&(clearTimeout(e),e=null)},t}function U(n,r){var e=G(n,r),t=function(){e.cancel(),e.apply(this,arguments)};return t.cancel=function(){e.cancel()},t}function M(n,r){return n===0?n===r:n==r}function J(n,r){return(Array.isArray(r)?r:r.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce(function(e,t){return(e||{})[t]},n)}function Q(n){return n instanceof Document&&n.nodeType===9||n instanceof Window}var N=["delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","ghostClass","ghostStyle","chosenClass","scrollSpeed","fallbackOnBody","scrollThreshold","delayOnTouchOnly","placeholderClass"],We=function(){function n(r,e){P()(this,n),p()(this,"el",void 0),p()(this,"options",void 0),p()(this,"sortable",void 0),p()(this,"rangeChanged",void 0),this.el=r,this.options=e,this.rangeChanged=!1,this.installSortable()}return X()(n,[{key:"destroy",value:function(){this.sortable.destroy(),this.rangeChanged=!1}},{key:"option",value:function(e,t){this.options[e]=t,N.includes(e)&&this.sortable.option(e,t)}},{key:"installSortable",value:function(){var e=this,t=N.reduce(function(o,i){return o[i]=e.options[i],o},{});this.sortable=new(T())(this.el,m()(m()({},t),{},{emptyInsertThreshold:0,swapOnDrop:function(i){return i.from===i.to},removeCloneOnDrop:function(i){return i.from===i.to},onDrag:function(i){return e.onDrag(i)},onDrop:function(i){return e.onDrop(i)},onChoose:function(i){return e.onChoose(i)},onUnchoose:function(i){return e.onUnchoose(i)}}))}},{key:"onChoose",value:function(e){this.dispatchEvent("onChoose",e)}},{key:"onUnchoose",value:function(e){this.dispatchEvent("onUnchoose",e)}},{key:"onDrag",value:function(e){var t=e.node.getAttribute("data-key"),o=this.getIndex(t),i=this.options.list[o],a=this.options.uniqueKeys[o];this.sortable.option("store",{item:i,key:a,index:o}),this.dispatchEvent("onDrag",{item:i,key:a,index:o,event:e})}},{key:"onDrop",value:function(e){var t,o=(t=T().get(e.from))===null||t===void 0?void 0:t.option("store"),i=o.item,a=o.key,u=o.index,S=this.options.list,y={key:a,item:i,list:S,event:e,changed:!1,oldList:K()(S),oldIndex:u,newIndex:u};if(e.from===e.to&&e.node===e.target||this.handleDropEvent(e,y,u),this.dispatchEvent("onDrop",y),e.from===this.el&&this.rangeChanged){var z;(z=T().dragged)===null||z===void 0||z.remove()}if(e.from!==e.to){var b;(b=T().clone)===null||b===void 0||b.remove()}this.rangeChanged=!1}},{key:"handleDropEvent",value:function(e,t,o){var i=e.target.getAttribute("data-key"),a=-1,u=o;e.from===e.to?(u=this.getIndex(t.key),a=this.getIndex(i),(u<a&&e.relative===-1||u>a&&e.relative===1)&&(a+=e.relative),a!==u&&(t.list.splice(u,1),t.list.splice(a,0,t.item))):(e.from===this.el&&(u=this.getIndex(t.key),t.list.splice(u,1)),e.to===this.el&&(u=-1,a=this.getIndex(i),e.relative===0?a=t.list.length:e.relative===1&&(a+=e.relative),t.list.splice(a,0,t.item))),t.changed=e.from!==e.to||a!==u,t.oldIndex=u,t.newIndex=a}},{key:"getIndex",value:function(e){if(e==null)return-1;for(var t=this.options.uniqueKeys,o=0,i=t.length;o<i;o++)if(M(t[o],e))return o;return-1}},{key:"dispatchEvent",value:function(e,t){var o=this.options[e];o&&o(t)}}]),n}(),Ye=["size","keeps","scroller","direction","debounceTime","throttleTime"],Pe=function(){function n(r){P()(this,n),p()(this,"sizes",void 0),p()(this,"range",void 0),p()(this,"offset",void 0),p()(this,"options",void 0),p()(this,"scrollEl",void 0),p()(this,"direction",void 0),p()(this,"sizeType",void 0),p()(this,"fixedSize",void 0),p()(this,"averageSize",void 0),p()(this,"onScroll",void 0),this.options=r;var e={size:0,keeps:0,buffer:0,wrapper:null,scroller:null,direction:"vertical",uniqueKeys:[],debounceTime:null,throttleTime:null};for(var t in e)!(t in this.options)&&(this.options[t]=e[t]);this.sizes=new Map,this.sizeType="INIT",this.fixedSize=0,this.averageSize=0,this.range={start:0,end:0,front:0,behind:0},this.offset=0,this.direction="STATIONARY",this.updateScrollElement(),this.updateOnScrollFunction(),this.addScrollEventListener(),this.checkIfUpdate(0,r.keeps-1)}return X()(n,[{key:"isFixed",value:function(){return this.sizeType==="FIXED"}},{key:"isFront",value:function(){return this.direction==="FRONT"}},{key:"isBehind",value:function(){return this.direction==="BEHIND"}},{key:"isHorizontal",value:function(){return this.options.direction==="horizontal"}},{key:"getSize",value:function(e){return this.sizes.get(e)||this.getItemSize()}},{key:"getOffset",value:function(){var e=this.isHorizontal()?"scrollLeft":"scrollTop";return this.scrollEl[e]}},{key:"getScrollSize",value:function(){var e=this.isHorizontal()?"scrollWidth":"scrollHeight";return this.scrollEl[e]}},{key:"getClientSize",value:function(){var e=this.isHorizontal()?"offsetWidth":"offsetHeight";return this.scrollEl[e]}},{key:"scrollToOffset",value:function(e){var t=this.isHorizontal()?"scrollLeft":"scrollTop";this.scrollEl[t]=e}},{key:"scrollToIndex",value:function(e){if(e>=this.options.uniqueKeys.length-1)this.scrollToBottom();else{var t=this.getOffsetByRange(0,e),o=this.getScrollStartOffset();this.scrollToOffset(t+o)}}},{key:"scrollToBottom",value:function(){var e=this,t=this.getScrollSize();this.scrollToOffset(t),setTimeout(function(){var o=e.getClientSize(),i=e.getScrollSize(),a=e.getOffset();a+o+1<i&&e.scrollToBottom()},5)}},{key:"option",value:function(e,t){var o=this,i=this.options[e];this.options[e]=t,e==="uniqueKeys"&&this.sizes.forEach(function(a,u){t.includes(u)||o.sizes.delete(u)}),e==="scroller"&&(i&&T().utils.off(i,"scroll",this.onScroll),this.updateScrollElement(),this.addScrollEventListener())}},{key:"updateRange",value:function(e){if(e){this.handleUpdate(e.start);return}var t=this.range.start;t=Math.max(t,0),this.handleUpdate(t)}},{key:"onItemResized",value:function(e,t){!t||this.sizes.get(e)===t||(this.sizes.set(e,t),this.sizeType==="INIT"?(this.sizeType="FIXED",this.fixedSize=t):this.isFixed()&&this.fixedSize!==t&&(this.sizeType="DYNAMIC",this.fixedSize=0),!this.averageSize&&this.sizeType==="DYNAMIC"&&this.sizes.size===this.options.keeps&&this.updateAverageSize())}},{key:"updateAverageSize",value:function(){var e=K()(this.sizes.values()).reduce(function(t,o){return t+o},0);this.averageSize=Math.round(e/this.sizes.size)}},{key:"addScrollEventListener",value:function(){this.options.scroller&&T().utils.on(this.options.scroller,"scroll",this.onScroll)}},{key:"removeScrollEventListener",value:function(){this.options.scroller&&T().utils.off(this.options.scroller,"scroll",this.onScroll)}},{key:"enableScroll",value:function(e){var t=this.options.scroller,o=e?T().utils.off:T().utils.on,i="onwheel"in document.createElement("div")?"wheel":"mousewheel";o(t,"DOMMouseScroll",this.preventDefault),o(t,i,this.preventDefault),o(t,"touchmove",this.preventDefault),o(t,"keydown",this.preventDefaultForKeyDown)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"preventDefaultForKeyDown",value:function(e){var t={37:1,38:1,39:1,40:1};if(t[e.keyCode])return this.preventDefault(e),!1}},{key:"updateScrollElement",value:function(){var e=this.options.scroller;if(Q(e)){var t=document.scrollingElement||document.documentElement||document.body;this.scrollEl=t}else this.scrollEl=e}},{key:"updateOnScrollFunction",value:function(){var e=this,t=this.options,o=t.debounceTime,i=t.throttleTime;o?this.onScroll=U(function(){return e.handleScroll()},o):i?this.onScroll=G(function(){return e.handleScroll()},i):this.onScroll=function(){return e.handleScroll()}}},{key:"handleScroll",value:function(){var e=this.getOffset(),t=this.getClientSize(),o=this.getScrollSize();e===this.offset?this.direction="STATIONARY":this.direction=e<this.offset?"FRONT":"BEHIND",this.offset=e;var i=this.isFront()&&e<=0,a=this.isBehind()&&t+e+1>=o;this.options.onScroll({top:i,bottom:a,offset:e,direction:this.direction}),this.isFront()?this.handleScrollFront():this.isBehind()&&this.handleScrollBehind()}},{key:"handleScrollFront",value:function(){var e=this.getScrollItems();if(!(e>=this.range.start)){var t=Math.max(e-this.options.buffer,0);this.checkIfUpdate(t,this.getEndByStart(t))}}},{key:"handleScrollBehind",value:function(){var e=this.getScrollItems();e<this.range.start+this.options.buffer||this.checkIfUpdate(e,this.getEndByStart(e))}},{key:"getScrollItems",value:function(){var e=this.offset-this.getScrollStartOffset();if(e<=0)return 0;if(this.isFixed())return Math.floor(e/this.fixedSize);for(var t=0,o=this.options.uniqueKeys.length,i=0,a=0;t<=o;){if(i=t+Math.floor((o-t)/2),a=this.getOffsetByRange(0,i),a===e)return i;a<e?t=i+1:a>e&&(o=i-1)}return t>0?--t:0}},{key:"checkIfUpdate",value:function(e,t){var o=this.options.keeps,i=this.options.uniqueKeys.length;i<=o?e=0:t-e<o-1&&(e=t-o+1),this.range.start!==e&&this.handleUpdate(e)}},{key:"handleUpdate",value:function(e){this.range.start=e,this.range.end=this.getEndByStart(e),this.range.front=this.getFrontOffset(),this.range.behind=this.getBehindOffset(),this.options.onUpdate(m()({},this.range))}},{key:"getFrontOffset",value:function(){return this.isFixed()?this.fixedSize*this.range.start:this.getOffsetByRange(0,this.range.start)}},{key:"getBehindOffset",value:function(){var e=this.range.end,t=this.getLastIndex();return this.isFixed()?(t-e)*this.fixedSize:(t-e)*this.getItemSize()}},{key:"getOffsetByRange",value:function(e,t){if(e>=t)return 0;for(var o=0,i=e;i<t;i++){var a=this.sizes.get(this.options.uniqueKeys[i]);o=o+(typeof a=="number"?a:this.getItemSize())}return o}},{key:"getEndByStart",value:function(e){return Math.min(e+this.options.keeps-1,this.getLastIndex())}},{key:"getLastIndex",value:function(){var e=this.options,t=e.uniqueKeys,o=e.keeps;return t.length>0?t.length-1:o-1}},{key:"getItemSize",value:function(){return this.isFixed()?this.fixedSize:this.options.size||this.averageSize}},{key:"getScrollStartOffset",value:function(){var e=this.options,t=e.wrapper,o=e.scroller;if(o===t)return 0;var i=0;if(o&&t){var a=this.isHorizontal()?"left":"top",u=Q(o)?T().utils.getRect(t):T().utils.getRect(t,!0,o);i=this.offset+u[a]}return i}}]),n}(),Xe=h(52677),Ge=h.n(Xe);function Je(n){var r=n.dataKey,e=n.sizeKey,t=n.dragging,o=n.chosenKey,i=n.children,a=n.onSizeChange,u=d.useRef(null);d.useLayoutEffect(function(){var y;if((typeof ResizeObserver=="undefined"?"undefined":Ge()(ResizeObserver))!==void 0){var z;y=new ResizeObserver(function(){var b=u.current[e];a(r,b)}),u.current&&((z=y)===null||z===void 0||z.observe(u.current))}return function(){y&&(y.disconnect(),y=null)}},[u]);var S=d.useMemo(function(){var y=i.props.style||{},z=M(r,o);return t&&z?Object.assign(y,{display:"none"}):y},[o,t]);return d.cloneElement(i,{"data-key":r,role:"item",ref:u,style:S,className:i.props.className})}var Qe=d.memo(Je),H=h(85893);function Ze(n){var r=n.list,e=n.start,t=n.end,o=n.dataKey,i=n.sizeKey,a=n.dragging,u=n.chosenKey,S=n.children,y=n.onSizeChange;return r.slice(e,t+1).map(function(z,b){var R=e+b,x=J(z,o);return(0,H.jsx)(Qe,{dataKey:x,sizeKey:i,dragging:a,chosenKey:u,onSizeChange:y,children:typeof S=="function"?S(z,R,x):S},x)})}var qe=Ze;function _e(n,r){d.useEffect(r,Object.values(n))}var Z=_e,D={drag:"onDrag",drop:"onDrop",top:"onTop",bottom:"onBottom"};function et(n,r){var e=n.dataKey,t=e===void 0?"":e,o=n.dataSource,i=o===void 0?[]:o,a=n.tableMode,u=a===void 0?!1:a,S=n.wrapTag,y=S===void 0?"div":S,z=n.rootTag,b=z===void 0?"div":z,R=n.style,x=R===void 0?{}:R,q=n.className,nt=q===void 0?"":q,_=n.wrapStyle,ee=_===void 0?{}:_,te=n.wrapClass,ot=te===void 0?"":te,ne=n.size,it=ne===void 0?void 0:ne,oe=n.keeps,k=oe===void 0?30:oe,ie=n.scroller,$=ie===void 0?void 0:ie,re=n.direction,B=re===void 0?"vertical":re,le=n.debounceTime,rt=le===void 0?0:le,se=n.throttleTime,lt=se===void 0?0:se,ae=n.delay,st=ae===void 0?0:ae,ue=n.group,at=ue===void 0?"":ue,ce=n.handle,ut=ce===void 0?"":ce,fe=n.lockAxis,ct=fe===void 0?void 0:fe,de=n.disabled,ft=de===void 0?!1:de,he=n.sortable,ve=he===void 0?!0:he,ge=n.draggable,dt=ge===void 0?'[role="item"]':ge,ye=n.animation,ht=ye===void 0?150:ye,Se=n.autoScroll,vt=Se===void 0?!0:Se,pe=n.scrollSpeed,gt=pe===void 0?{x:10,y:10}:pe,me=n.ghostClass,yt=me===void 0?"":me,ze=n.ghostStyle,St=ze===void 0?void 0:ze,Te=n.chosenClass,pt=Te===void 0?"":Te,be=n.placeholderClass,mt=be===void 0?"":be,Ce=n.fallbackOnBody,zt=Ce===void 0?!1:Ce,Oe=n.scrollThreshold,Tt=Oe===void 0?55:Oe,xe=n.delayOnTouchOnly,bt=xe===void 0?!1:xe,Ct=d.useState({start:0,end:k-1,front:0,behind:0}),ke=Y()(Ct,2),C=ke[0],Ot=ke[1],w=d.useRef(!1),F=d.useRef(""),I=d.useRef([]),L=d.useRef(),Ie=d.useRef(),xt=function(l){return v.current.getSize(l)},Ee=function(){return v.current.getOffset()},Ke=function(){return v.current.getClientSize()},De=function(){return v.current.getScrollSize()},Re=function(l){var c;(c=v.current)===null||c===void 0||c.scrollToOffset(l)},kt=function(l){var c;(c=v.current)===null||c===void 0||c.scrollToIndex(l)},It=function(l){var c=I.current.indexOf(l);if(c>-1){var f;(f=v.current)===null||f===void 0||f.scrollToIndex(c)}},Et=function(){Re(0)},Kt=function(){var l;(l=v.current)===null||l===void 0||l.scrollToBottom()};d.useImperativeHandle(r,function(){return{getSize:xt,getOffset:Ee,getClientSize:Ke,getScrollSize:De,scrollToTop:Et,scrollToKey:It,scrollToIndex:kt,scrollToOffset:Re,scrollToBottom:Kt}}),d.useEffect(function(){return wt(),Nt(),function(){var s,l;(s=v.current)===null||s===void 0||s.removeScrollEventListener(),(l=O.current)===null||l===void 0||l.destroy()}},[]);var A=d.useRef(!1),v=d.useRef(),$e={size:it,keeps:k,scroller:$,direction:B,debounceTime:rt,throttleTime:lt},Dt=U(function(){var s;A.current=!0,(s=n[D.top])===null||s===void 0||s.call(n)},50),Rt=U(function(){var s;(s=n[D.bottom])===null||s===void 0||s.call(n)},50),$t=function(l){A.current=!1,l.top?Dt():l.bottom&&Rt()},Bt=function(l){Ot(function(c){return O.current&&w.current&&l.start!==c.start&&(O.current.rangeChanged=!0),l})},wt=function(){v.current=new Pe(m()(m()({},$e),{},{buffer:Math.round(k/3),wrapper:Ie.current,scroller:$||L.current,uniqueKeys:I.current,onScroll:$t,onUpdate:Bt}))};Z($e,function(){Ye.forEach(function(s){if(n[s]!==void 0){var l;(l=v.current)===null||l===void 0||l.option(s,n[s])}})});var j=d.useRef(0);d.useEffect(function(){if(j.current&&A.current&&n.keepOffset){var s=Math.abs(i.length-j.current);if(s>0){var l;(l=v.current)===null||l===void 0||l.scrollToIndex(s)}A.current=!1}j.current=i.length},[i]);var O=d.useRef(),Be={delay:st,group:at,handle:ut,lockAxis:ct,disabled:ft,sortable:ve,draggable:dt,animation:ht,autoScroll:vt,ghostClass:yt,ghostStyle:St,chosenClass:pt,scrollSpeed:gt,fallbackOnBody:zt,scrollThreshold:Tt,delayOnTouchOnly:bt,placeholderClass:mt},Ft=function(l){F.current=l.node.getAttribute("data-key")},At=function(){F.current=""},Ut=function(l){var c;if(w.current=!0,!ve){var f,g;(f=v.current)===null||f===void 0||f.enableScroll(!1),(g=O.current)===null||g===void 0||g.option("autoScroll",!1)}(c=n[D.drag])===null||c===void 0||c.call(n,l)},Mt=function(l){var c,f,g;w.current=!1,(c=v.current)===null||c===void 0||c.enableScroll(!0),(f=O.current)===null||f===void 0||f.option("autoScroll",n.autoScroll);var E=m()(m()({},l),{},{list:K()(l.list)});(g=n[D.drop])===null||g===void 0||g.call(n,E)},Nt=function(){O.current=new We(L.current,m()(m()({},Be),{},{list:i,uniqueKeys:I.current,onDrag:Ut,onDrop:Mt,onChoose:Ft,onUnchoose:At}))};Z(Be,function(){N.forEach(function(s){if(n[s]!==void 0){var l;(l=O.current)===null||l===void 0||l.option(s,n[s])}})});var we=d.useRef([]);d.useEffect(function(){var s;Ht(),Lt(we.current,i),we.current=i,(s=O.current)===null||s===void 0||s.option("list",i)},[i]);var Ht=function(){var l,c;I.current=i.map(function(f){return J(f,t)}),(l=v.current)===null||l===void 0||l.option("uniqueKeys",I.current),(c=O.current)===null||c===void 0||c.option("uniqueKeys",I.current)},Lt=function(l,c){var f;if(!(!l.length&&!c.length)&&l.length!==c.length){var g=m()({},C);l.length>k&&c.length>l.length&&g.end===l.length-1&&jt()&&g.start++,(f=v.current)===null||f===void 0||f.updateRange(g)}},jt=function(){var l=Ee(),c=Ke(),f=De();return l+c+1>=f},Vt=function(l,c){var f,g;if(!M(l,F.current)){var E=(f=v.current)===null||f===void 0?void 0:f.sizes.size;(g=v.current)===null||g===void 0||g.onItemResized(l,c),E===k-1&&i.length>k&&v.current.updateRange(m()({},C))}},V=d.useMemo(function(){var s=C.front,l=C.behind,c=B!=="vertical",f=c?"auto hidden":"hidden auto",g=c?"0px ".concat(l,"px 0px ").concat(s,"px"):"".concat(s,"px 0px ").concat(l,"px"),E=m()(m()({},x),{},{overflow:u||$?"":f}),Zt=m()(m()({},ee),{},{padding:u?"":g}),qt=c?"offsetWidth":"offsetHeight";return{containerStyle:E,wrapperStyle:Zt,itemSizeKey:qt}},[C,x,ee,$,u,B]),Wt=V.containerStyle,Yt=V.wrapperStyle,Pt=V.itemSizeKey,Xt=d.useMemo(function(){var s=u?"table":y,l=u?"tbody":y;return[s,l]},[b,y,u]),Fe=Y()(Xt,2),Gt=Fe[0],Jt=Fe[1],Qt=qe({list:i,start:C.start,end:C.end,dataKey:t,sizeKey:Pt,children:n.children,dragging:w.current,chosenKey:F.current,onSizeChange:Vt}),Ae=function(l,c){var f=B==="vertical"?"height":"width",g=p()({padding:0,border:0},f,"".concat(l,"px"));return(0,H.jsx)("tr",{children:(0,H.jsx)("td",{style:g})},c)};return d.createElement(Gt,{ref:L,style:Wt,className:nt},[n.header,d.createElement(Jt,{ref:Ie,key:"virtual-table-wrap",style:Yt,className:ot},[u&&Ae(C.front,"virtual-table-front")].concat(K()(Qt),[u&&Ae(C.behind,"virtual-table-behind")])),n.footer])}var tt=d.forwardRef(et)}}]);
