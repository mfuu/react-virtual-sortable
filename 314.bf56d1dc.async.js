(self.webpackChunkreact_virtual_sortable=self.webpackChunkreact_virtual_sortable||[]).push([[314],{78314:function(Kt,J,O){"use strict";O.r(J),O.d(J,{default:function(){return S}});var xt=O(9783),K=O.n(xt),ct=O(19632),et=O.n(ct),Et=O(97857),N=O.n(Et),zt=O(5574),_=O.n(zt),b=O(67294),pt=O(12444),X=O.n(pt),ut=O(72004),gt=O.n(ut),It=O(26867),F=O.n(It);function mt(l,s){var e,i=function(){for(var c=this,p=arguments.length,v=new Array(p),y=0;y<p;y++)v[y]=arguments[y];e||(s<=0?l.apply(this,v):e=setTimeout(function(){e=null,l.apply(c,v)},s))};return i.cancel=function(){e&&(clearTimeout(e),e=null)},i}function yt(l,s){var e=mt(l,s),i=function(){e.cancel();for(var c=arguments.length,p=new Array(c),v=0;v<c;v++)p[v]=arguments[v];e.apply(this,p)};return i.cancel=function(){e.cancel()},i}function Q(l,s){return l===0&&s===0?1/l===1/s:Number.isNaN(l)&&Number.isNaN(s)?!0:l==s}function st(l,s){return(Array.isArray(s)?s:s.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce(function(e,i){return(e||{})[i]},l)}function E(l){return l instanceof Document&&l.nodeType===9||l instanceof Window}var Ct=function(){function l(s){X()(this,l),K()(this,"sizes",void 0),K()(this,"range",void 0),K()(this,"offset",void 0),K()(this,"options",void 0),K()(this,"scrollEl",void 0),K()(this,"direction",void 0),K()(this,"sizeType",void 0),K()(this,"fixedSize",void 0),K()(this,"averageSize",void 0),K()(this,"onScroll",void 0),this.options=s;var e={size:0,keeps:0,buffer:0,wrapper:null,scroller:null,direction:"vertical",uniqueKeys:[],debounceTime:null,throttleTime:null};for(var i in e)!(i in this.options)&&(this.options[i]=e[i]);this.sizes=new Map,this.sizeType="INIT",this.fixedSize=0,this.averageSize=0,this.range={start:0,end:0,front:0,behind:0},this.offset=0,this.direction="STATIONARY",this.updateScrollElement(),this.updateOnScrollFunction(),this.addScrollEventListener(),this.checkIfUpdate(0,s.keeps-1)}return gt()(l,[{key:"isFixed",value:function(){return this.sizeType==="FIXED"}},{key:"isFront",value:function(){return this.direction==="FRONT"}},{key:"isBehind",value:function(){return this.direction==="BEHIND"}},{key:"isHorizontal",value:function(){return this.options.direction==="horizontal"}},{key:"getSize",value:function(e){return this.sizes.get(e)||this.getItemSize()}},{key:"getOffset",value:function(){var e=this.isHorizontal()?"scrollLeft":"scrollTop";return this.scrollEl[e]}},{key:"getScrollSize",value:function(){var e=this.isHorizontal()?"scrollWidth":"scrollHeight";return this.scrollEl[e]}},{key:"getClientSize",value:function(){var e=this.isHorizontal()?"offsetWidth":"offsetHeight";return this.scrollEl[e]}},{key:"scrollToOffset",value:function(e){var i=this.isHorizontal()?"scrollLeft":"scrollTop";this.scrollEl[i]=e}},{key:"scrollToIndex",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top";if(e>=this.options.uniqueKeys.length-1){this.scrollToBottom();return}if(e<0){this.scrollToOffset(0);return}var a=this.getOffset(),c=this.getClientSize(),p=this.getSize(this.options.uniqueKeys[e]),v=this.getOffsetByRange(0,e)+this.getScrollStartOffset(),y=v+p,D=a,$=a+c;if(i==="auto"){if(v>=D&&y<=$)return;i=v<D?"top":"bottom"}if(i==="top")this.scrollToOffset(v);else if(i==="bottom"){var U=Math.max(0,y-c);this.scrollToOffset(U)}}},{key:"scrollToBottom",value:function(){var e=this,i=this.getScrollSize();this.scrollToOffset(i),setTimeout(function(){e.isReachedBottom()||e.scrollToBottom()},5)}},{key:"isReachedBottom",value:function(){return this.getOffset()+this.getClientSize()+1>=this.getScrollSize()}},{key:"option",value:function(e,i){var a=this,c=this.options[e];this.options[e]=i,e==="uniqueKeys"&&this.sizes.forEach(function(p,v){i.includes(v)||a.sizes.delete(v)}),e==="scroller"&&(c&&F().utils.off(c,"scroll",this.onScroll),this.updateScrollElement(),this.addScrollEventListener())}},{key:"updateRange",value:function(e){if(e){this.handleUpdate(e.start);return}var i=this.range.start;i=Math.max(i,0),this.handleUpdate(i)}},{key:"updateItemSize",value:function(e,i){!i||this.sizes.get(e)===i||(this.sizes.set(e,i),this.sizeType==="INIT"?(this.sizeType="FIXED",this.fixedSize=i):this.isFixed()&&this.fixedSize!==i&&(this.sizeType="DYNAMIC",this.fixedSize=0),!this.averageSize&&this.sizeType==="DYNAMIC"&&this.sizes.size===this.options.keeps&&this.updateAverageSize())}},{key:"updateAverageSize",value:function(){var e=et()(this.sizes.values()).reduce(function(i,a){return i+a},0);this.averageSize=Math.round(e/this.sizes.size)}},{key:"addScrollEventListener",value:function(){this.options.scroller&&F().utils.on(this.options.scroller,"scroll",this.onScroll)}},{key:"removeScrollEventListener",value:function(){this.options.scroller&&F().utils.off(this.options.scroller,"scroll",this.onScroll)}},{key:"enableScroll",value:function(e){var i=this.options.scroller,a=e?F().utils.off:F().utils.on,c="onwheel"in document.createElement("div")?"wheel":"mousewheel";a(i,"DOMMouseScroll",this.preventDefault),a(i,c,this.preventDefault),a(i,"touchmove",this.preventDefault),a(i,"keydown",this.preventDefaultForKeyDown)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"preventDefaultForKeyDown",value:function(e){var i={37:1,38:1,39:1,40:1};if(i[e.keyCode])return this.preventDefault(e),!1}},{key:"updateScrollElement",value:function(){var e=this.options.scroller;if(E(e)){var i=document.scrollingElement||document.documentElement||document.body;this.scrollEl=i}else this.scrollEl=e}},{key:"updateOnScrollFunction",value:function(){var e=this,i=this.options,a=i.debounceTime,c=i.throttleTime;a?this.onScroll=yt(function(){return e.handleScroll()},a):c?this.onScroll=mt(function(){return e.handleScroll()},c):this.onScroll=function(){return e.handleScroll()}}},{key:"handleScroll",value:function(){var e=this.getOffset(),i=this.getClientSize(),a=this.getScrollSize();e===this.offset?this.direction="STATIONARY":this.direction=e<this.offset?"FRONT":"BEHIND",this.offset=e;var c=this.isFront()&&e<=0,p=this.isBehind()&&i+e+1>=a;this.options.onScroll({top:c,bottom:p,offset:e,direction:this.direction}),this.isFront()?this.handleScrollFront():this.isBehind()&&this.handleScrollBehind()}},{key:"handleScrollFront",value:function(){var e=this.getScrollItems();if(!(e>=this.range.start)){var i=Math.max(e-this.options.buffer,0);this.checkIfUpdate(i,this.getEndByStart(i))}}},{key:"handleScrollBehind",value:function(){var e=this.getScrollItems();e<this.range.start+this.options.buffer||this.checkIfUpdate(e,this.getEndByStart(e))}},{key:"getScrollItems",value:function(){var e=this.offset-this.getScrollStartOffset();if(e<=0)return 0;if(this.isFixed())return Math.floor(e/this.fixedSize);for(var i=0,a=this.options.uniqueKeys.length,c=0,p=0;i<=a;){if(c=i+Math.floor((a-i)/2),p=this.getOffsetByRange(0,c),p===e)return c;p<e?i=c+1:p>e&&(a=c-1)}return i>0?--i:0}},{key:"checkIfUpdate",value:function(e,i){var a=this.options.keeps,c=this.options.uniqueKeys.length;c<=a?e=0:i-e<a-1&&(e=i-a+1),this.range.start!==e&&this.handleUpdate(e)}},{key:"handleUpdate",value:function(e){var i=this.range.start!==e;this.range.start=e,this.range.end=this.getEndByStart(e),this.range.front=this.getFrontOffset(),this.range.behind=this.getBehindOffset(),this.options.onUpdate(N()({},this.range),i)}},{key:"getFrontOffset",value:function(){return this.isFixed()?this.fixedSize*this.range.start:this.getOffsetByRange(0,this.range.start)}},{key:"getBehindOffset",value:function(){var e=this.range.end,i=this.getLastIndex();return this.isFixed()?(i-e)*this.fixedSize:(i-e)*this.getItemSize()}},{key:"getOffsetByRange",value:function(e,i){if(e>=i)return 0;for(var a=0,c=e;c<i;c++){var p=this.sizes.get(this.options.uniqueKeys[c]);a=a+(typeof p=="number"?p:this.getItemSize())}return a}},{key:"getEndByStart",value:function(e){return Math.min(e+this.options.keeps-1,this.getLastIndex())}},{key:"getLastIndex",value:function(){var e=this.options,i=e.uniqueKeys,a=e.keeps;return i.length>0?i.length-1:a-1}},{key:"getItemSize",value:function(){return this.isFixed()?this.fixedSize:this.options.size||this.averageSize}},{key:"getScrollStartOffset",value:function(){var e=this.options,i=e.wrapper,a=e.scroller;if(a===i)return 0;var c=0;if(a&&i){var p=this.isHorizontal()?"left":"top",v=E(a)?F().utils.getRect(i):F().utils.getRect(i,!0,a);c=this.offset+v[p]}return c}}]),l}(),St=["delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","ghostClass","ghostStyle","chosenClass","scrollSpeed","appendToBody","ghostContainer","scrollThreshold","delayOnTouchOnly","placeholderClass","dropOnAnimationEnd"],ht=["size","keeps","scroller","direction","uniqueKeys","debounceTime","throttleTime"],G=function(){function l(s,e){X()(this,l),K()(this,"el",void 0),K()(this,"options",void 0),K()(this,"removeDraggedEl",void 0),K()(this,"virtual",void 0),K()(this,"sortable",void 0),K()(this,"sortableState",void 0),this.el=s,this.options=e,this.initVirtual(),this.initSortable()}return gt()(l,[{key:"destroy",value:function(){this.virtual.removeScrollEventListener(),this.sortable.destroy()}},{key:"option",value:function(e,i){this.options[e]=i,ht.includes(e)&&this.virtual.option(e,i),St.includes(e)&&this.sortable.option(e,i)}},{key:"call",value:function(e){if(e in this.virtual){var i=this.virtual[e];if(typeof i=="function"){for(var a=arguments.length,c=new Array(a>1?a-1:0),p=1;p<a;p++)c[p-1]=arguments[p];return i.apply(this.virtual,c)}throw new Error("Property ".concat(String(e)," is not a function on Virtual."))}else throw new Error("Method ".concat(String(e)," does not exist on Virtual."))}},{key:"initVirtual",value:function(){var e=this,i=ht.reduce(function(a,c){return a[c]=e.options[c],a},{});this.virtual=new Ct(N()(N()({},i),{},{buffer:this.options.buffer,wrapper:this.options.wrapper,scroller:this.options.scroller,uniqueKeys:this.options.uniqueKeys,onScroll:function(c){return e.onScroll(c)},onUpdate:function(c,p){return e.onUpdate(c,p)}}))}},{key:"onScroll",value:function(e){this.dispatchEvent("onScroll",e)}},{key:"onUpdate",value:function(e,i){this.sortableState==="dragging"&&i&&(this.removeDraggedEl=!0),this.dispatchEvent("onUpdate",e,i)}},{key:"initSortable",value:function(){var e=this,i=St.reduce(function(a,c){return a[c]=e.options[c],a},{});this.sortable=new(F())(this.el,N()(N()({},i),{},{emptyInsertThreshold:0,swapOnDrop:!1,removeCloneOnDrop:function(c){return c.from===c.to},onDrag:function(c){return e.onDrag(c)},onDrop:function(c){return e.onDrop(c)}}))}},{key:"onDrag",value:function(e){this.sortableState="dragging";var i=e.node.getAttribute("data-key"),a=this.getIndex(i);this.sortable.option("store",{key:i,index:a}),this.dispatchEvent("onDrag",{key:i,index:a,event:e})}},{key:"onDrop",value:function(e){var i=F().get(e.from).option("store"),a=i.key,c=i.index,p={key:a,event:e,changed:!1,oldIndex:c,newIndex:c};if(!(e.from===e.to&&e.node===e.target)){var v=this.getEventProperties(p,e);Object.assign(p,v)}if(this.dispatchEvent("onDrop",p),e.from===this.el&&this.removeDraggedEl){var y;(y=F().dragged)===null||y===void 0||y.remove()}if(e.from!==e.to){var D;(D=F().clone)===null||D===void 0||D.remove()}this.sortableState="",this.removeDraggedEl=!1}},{key:"getEventProperties",value:function(e,i){var a=e.key,c=e.oldIndex,p=i.target.getAttribute("data-key"),v=-1,y=c;return i.from===i.to?(y=this.getIndex(a),v=this.getIndex(p),(y<v&&i.relative===-1||y>v&&i.relative===1)&&(v+=i.relative)):(i.from===this.el&&(y=this.getIndex(a)),i.to===this.el&&(y=-1,v=this.getIndex(p),i.relative===0?v=this.options.uniqueKeys.length:i.relative===1&&(v+=i.relative))),{changed:i.from!==i.to||v!==y,oldIndex:y,newIndex:v}}},{key:"getIndex",value:function(e){if(e==null)return-1;for(var i=this.options.uniqueKeys,a=0,c=i.length;a<c;a++)if(Q(i[a],e))return a;return-1}},{key:"dispatchEvent",value:function(e){if(e in this.options){var i=this.options[e];if(typeof i=="function"){for(var a=arguments.length,c=new Array(a>1?a-1:0),p=1;p<a;p++)c[p-1]=arguments[p];return i.apply(this,c)}}}}]),l}(),dt=O(52677),q=O.n(dt);function Ot(l){var s=l.dataKey,e=l.horizontal,i=l.dragging,a=l.children,c=l.onSizeChange,p=b.useRef(null);b.useLayoutEffect(function(){var y;if((typeof ResizeObserver=="undefined"?"undefined":q()(ResizeObserver))!==void 0){var D;y=new ResizeObserver(function(){var $=e?"offsetWidth":"offsetHeight",U=p.current[$];c(s,U)}),p.current&&((D=y)===null||D===void 0||D.observe(p.current))}return function(){y&&(y.disconnect(),y=null)}},[p]);var v=b.useMemo(function(){var y=a.props.style||{},D=Q(s,i);return N()(N()({},y),{},{display:D?"none":""})},[i]);return b.cloneElement(a,{"data-key":s,role:"item",ref:p,style:v,className:a.props.className})}var Dt=b.memo(Ot),bt=O(85893);function nt(l){var s=l.list,e=l.start,i=l.end,a=l.dataKey,c=l.horizontal,p=l.dragging,v=l.children,y=l.onSizeChange;return b.useMemo(function(){return s.slice(e,i+1).map(function(D,$){var U=e+$,j=st(D,a);return(0,bt.jsx)(Dt,{dataKey:j,dragging:p,horizontal:c,onSizeChange:y,children:typeof v=="function"?v(D,U,j):v},j)})},[s,e,i,a,c,p,v])}var P=nt;function w(l,s){b.useEffect(s,Object.values(l))}var x=w,ot;function L(l,s){var e=l.dataKey,i=e===void 0?"":e,a=l.dataSource,c=a===void 0?[]:a,p=l.tableMode,v=p===void 0?!1:p,y=l.wrapTag,D=y===void 0?"div":y,$=l.rootTag,U=$===void 0?"div":$,j=l.style,it=j===void 0?{}:j,ft=l.className,kt=ft===void 0?"":ft,M=l.wrapStyle,t=M===void 0?{}:M,n=l.wrapClass,o=n===void 0?"":n,r=l.size,u=r===void 0?void 0:r,h=l.keeps,f=h===void 0?30:h,d=l.scroller,m=d===void 0?void 0:d,I=l.direction,T=I===void 0?"vertical":I,C=l.debounceTime,R=C===void 0?0:C,W=l.throttleTime,Z=W===void 0?0:W,H=l.delay,rt=H===void 0?0:H,lt=l.group,le=lt===void 0?"":lt,Ft=l.handle,ae=Ft===void 0?"":Ft,$t=l.lockAxis,se=$t===void 0?void 0:$t,Ht=l.disabled,ce=Ht===void 0?!1:Ht,Lt=l.sortable,Pt=Lt===void 0?!0:Lt,Ut=l.draggable,ue=Ut===void 0?'[role="item"]':Ut,Wt=l.animation,he=Wt===void 0?150:Wt,Yt=l.autoScroll,de=Yt===void 0?!0:Yt,Xt=l.scrollSpeed,fe=Xt===void 0?{x:10,y:10}:Xt,Vt=l.ghostClass,ve=Vt===void 0?"":Vt,_t=l.ghostStyle,pe=_t===void 0?void 0:_t,jt=l.chosenClass,ge=jt===void 0?"":jt,Gt=l.placeholderClass,me=Gt===void 0?"":Gt,qt=l.appendToBody,ye=qt===void 0?!1:qt,Jt=l.scrollThreshold,Se=Jt===void 0?55:Jt,Qt=l.delayOnTouchOnly,be=Qt===void 0?!1:Qt,Zt=l.dropOnAnimationEnd,we=Zt===void 0?!0:Zt,Te=b.useState({start:0,end:f-1,front:0,behind:0}),te=_()(Te,2),at=te[0],xe=te[1],Mt=b.useRef(""),Bt=b.useRef(),Nt=b.useRef(),Ee=function(g){return B.current.call("getSize",g)},ze=function(){return B.current.call("getOffset")},Ie=function(){return B.current.call("getClientSize")},Ce=function(){return B.current.call("getScrollSize")},ee=function(g){B.current.call("scrollToOffset",g)},Oe=function(g,k){B.current.call("scrollToIndex",g,k)},De=function(g,k){var A=Rt.current.indexOf(g);A>-1&&B.current.call("scrollToIndex",A,k)},ke=function(){ee(0)},Me=function(){B.current.call("scrollToBottom")};b.useImperativeHandle(s,function(){return{getSize:Ee,getOffset:ze,getClientSize:Ie,getScrollSize:Ce,scrollToTop:ke,scrollToKey:De,scrollToIndex:Oe,scrollToOffset:ee,scrollToBottom:Me}});var vt=b.useRef([]),Rt=b.useRef([]),ne=b.useRef(0),wt=b.useRef(0);b.useEffect(function(){if(vt.current=c,Re(),Be(ne.current,c.length),wt.current&&l.keepOffset){var z=c.length-wt.current;if(z>0){var g;(g=B.current)===null||g===void 0||g.call("scrollToIndex",z)}wt.current=0}ne.current=c.length},[c]),b.useEffect(function(){return Ne(),function(){B.current.destroy()}},[]);var Re=function(){var g;Rt.current=vt.current.map(function(k){return st(k,i)}),(g=B.current)===null||g===void 0||g.option("uniqueKeys",Rt.current)},Be=function(g,k){var A,Y;if(g!==k){var V=N()({},at);g>f&&k>g&&V.end===g-1&&(A=B.current)!==null&&A!==void 0&&A.call("isReachedBottom")&&V.start++,(Y=B.current)===null||Y===void 0||Y.call("updateRange",V)}},Tt=function(g){for(var k=l[g],A=arguments.length,Y=new Array(A>1?A-1:0),V=1;V<A;V++)Y[V-1]=arguments[V];k&&k.apply(null,Y)},B=b.useRef(),At={size:u,keeps:f,scroller:m,direction:T,debounceTime:R,throttleTime:Z,delay:rt,group:le,handle:ae,lockAxis:se,disabled:ce,sortable:Pt,draggable:ue,animation:he,autoScroll:de,ghostClass:ve,ghostStyle:pe,chosenClass:ge,scrollSpeed:fe,appendToBody:ye,scrollThreshold:Se,delayOnTouchOnly:be,placeholderClass:me,dropOnAnimationEnd:we},Ne=function(){B.current=new G(Bt.current,N()(N()({},At),{},{buffer:Math.round(f/3),wrapper:Nt.current,scroller:m||Bt.current,uniqueKeys:Rt.current,ghostContainer:Nt.current,onDrag:Le,onDrop:Pe,onScroll:Fe,onUpdate:$e}))};x(At,function(){B.current&&Object.keys(At).forEach(function(z){l[z]!==void 0&&B.current.option(z,l[z])})});var Ae=yt(function(){wt.current=vt.current.length,Tt("onTop")},50),Ke=yt(function(){Tt("onBottom")},50),Fe=function(g){wt.current=0,g.top?Ae():g.bottom&&Ke()},$e=function(g,k){xe(g),k&&Tt("onRangeChange",g)},He=function(g,k){if(!(Q(g,Mt.current)||!B.current)){var A=B.current.virtual.sizes.size;B.current.call("updateItemSize",g,k),A===f-1&&vt.current.length>f&&B.current.call("updateRange",at)}},Le=function(g){var k=g.key,A=g.index,Y=vt.current[A];if(Mt.current=k,ot=Y,!Pt){var V,tt;(V=B.current)===null||V===void 0||V.call("enableScroll",!1),(tt=B.current)===null||tt===void 0||tt.option("autoScroll",!1)}Tt("onDrag",N()(N()({},g),{},{item:Y}))},Pe=function(g){var k=ot,A=g.oldIndex,Y=g.newIndex,V=et()(vt.current),tt=et()(vt.current);A===-1?tt.splice(Y,0,k):Y===-1?tt.splice(A,1):(tt.splice(A,1),tt.splice(Y,0,k)),B.current.call("enableScroll",!0),B.current.option("autoScroll",l.autoScroll),Mt.current="",Tt("onDrop",N()(N()({},g),{},{item:k,list:tt,oldList:V}))},oe=b.useMemo(function(){var z=at.front,g=at.behind,k=T==="horizontal",A=k?"auto hidden":"hidden auto",Y=k?"0px ".concat(g,"px 0px ").concat(z,"px"):"".concat(z,"px 0px ").concat(g,"px"),V=N()(N()({},it),{},{overflow:v||m?"":A}),tt=N()(N()({},t),{},{padding:v?"":Y});return{rootElStyle:V,wrapElStyle:tt}},[at,it,t,m,v,T]),Ue=oe.rootElStyle,We=oe.wrapElStyle,ie=b.useMemo(function(){var z=v?"table":D,g=v?"tbody":D;return{rootElTag:z,wrapElTag:g}},[U,D,v]),Ye=ie.rootElTag,Xe=ie.wrapElTag,Ve=P({list:c,start:at.start,end:at.end,dataKey:i,children:l.children,dragging:Mt.current,horizontal:T==="horizontal",onSizeChange:He}),re=function(g,k){var A=T==="vertical"?"height":"width",Y=K()({padding:0,border:0},A,"".concat(g,"px"));return(0,bt.jsx)("tr",{children:(0,bt.jsx)("td",{style:Y})},k)};return b.createElement(Ye,{ref:Bt,style:Ue,className:kt},[l.header,b.createElement(Xe,{ref:Nt,style:We,className:o},[v&&re(at.front,"front")].concat(et()(Ve),[v&&re(at.behind,"behind")])),l.footer])}var S=b.forwardRef(L)},26867:function(Kt){(function(J,O){Kt.exports=O()})(this,function(){"use strict";function J(){return J=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var r in o)({}).hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},J.apply(null,arguments)}function O(t){return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},O(t)}var xt={capture:!1,passive:!1},K=/\s+/g;function ct(t){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(t)}var et=ct(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Et=ct(/Edge/i),N=ct(/safari/i)&&!ct(/chrome/i)&&!ct(/android/i),zt=function(){var t=!1;return document.addEventListener("checkIfSupportPassive",null,{get passive(){return t=!0,!0}}),t}();function _(t,n,o){window.addEventListener?t.addEventListener(n,o,!(!zt&&et)&&xt):window.attachEvent?t.attachEvent("on"+n,o):t["on"+n]=o}function b(t,n,o){window.removeEventListener?t.removeEventListener(n,o,!(!zt&&et)&&xt):window.detachEvent?t.detachEvent("on"+n,o):t["on"+n]=null}function pt(){return document.scrollingElement||document.documentElement}function X(t,n,o){if(t.getBoundingClientRect||t===window){var r,u,h,f,d,m,I;if(t!==window&&t.parentNode&&t!==pt()?(u=(r=t.getBoundingClientRect()).top,h=r.left,f=r.bottom,d=r.right,m=r.height,I=r.width):(u=0,h=0,f=window.innerHeight,d=window.innerWidth,m=window.innerHeight,I=window.innerWidth),n&&t!==window){o=o||t.parentNode;do if(o&&o.getBoundingClientRect){var T=o.getBoundingClientRect();u-=T.top+parseInt(E(o,"border-top-width")),h-=T.left+parseInt(E(o,"border-left-width")),f=u+r.height,d=h+r.width;break}while(o=o.parentNode)}return{top:u,left:h,bottom:f,right:d,width:I,height:m}}}function ut(t,n,o,r){if(t){o=o||document;do{if(n!=null&&(n[0]===">"?t.parentNode===o&&st(t,n):st(t,n))||r&&t===o)return t;if(t===o)break}while(t=t.parentNode);return null}}function gt(t,n){if(!t||!n)return!1;if(n.compareDocumentPosition)return!!(16&n.compareDocumentPosition(t));if(n.contains&&t.nodeType===1)return n.contains(t)&&n!==t;for(;t=t.parentNode;)if(t===n)return!0;return!1}function It(t,n){for(var o=t.lastElementChild;o&&(o===M.ghost||E(o,"display")==="none"||n&&!st(o,n));)o=o.previousElementSibling;return o||null}function F(t,n){if(!t||!t.parentNode)return-1;for(var o=0;t=t.previousElementSibling;)t===M.ghost||t.nodeName.toUpperCase()==="TEMPLATE"||E(t,"display")==="none"||n&&!st(t,n)||o++;return o}function mt(t,n,o,r){for(var u=0,h=0,f=t.children;u<f.length;){if(f[u]!==M.ghost&&E(f[u],"display")!=="none"&&ut(f[u],o,t,!1)&&(r||f[u]!==M.dragged)){if(h===n)return f[u];h++}u++}return null}function yt(t,n){var o=E(t),r=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),u=mt(t,0,n),h=mt(t,1,n),f=u&&E(u),d=h&&E(h),m=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+X(u).width,I=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+X(h).width,T=Et||et?"cssFloat":"float";if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(u&&f.float&&f.float!=="none"){var C=f.float==="left"?"left":"right";return!h||d.clear!=="both"&&d.clear!==C?"horizontal":"vertical"}return u&&(f.display==="block"||f.display==="flex"||f.display==="table"||f.display==="grid"||m>=r&&o[T]==="none"||h&&o[T]==="none"&&m+I>r)?"vertical":"horizontal"}function Q(t,n,o){if(t&&n)if(t.classList)t.classList[o?"add":"remove"](n);else{var r=(" "+t.className+" ").replace(K," ").replace(" "+n+" "," ");t.className=(r+(o?" "+n:"")).replace(K," ")}}function st(t,n){if(n){if(n[0]===">"&&(n=n.substring(1)),t)try{if(t.matches)return t.matches(n);if(t.msMatchesSelector)return t.msMatchesSelector(n);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(n)}catch(o){return!1}return!1}}function E(t,n,o){var r=t&&t.style;if(r){if(o===void 0)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),n===void 0?o:o[n];n in r||n.indexOf("webkit")!==-1||(n="-webkit-"+n),r[n]=o+(typeof o=="string"?"":"px")}}function Ct(t,n){return Math.round(t.top)===Math.round(n.top)&&Math.round(t.left)===Math.round(n.left)&&Math.round(t.height)===Math.round(n.height)&&Math.round(t.width)===Math.round(n.width)}function St(t,n){var o,r,u=(r=n,(o=t).compareDocumentPosition?o.compareDocumentPosition(r):o.contains?(o!=r&&o.contains(r)&&16)+(o!=r&&r.contains(o)&&8)+(o.sourceIndex>=0&&r.sourceIndex>=0?(o.sourceIndex<r.sourceIndex&&4)+(o.sourceIndex>r.sourceIndex&&2):1):0);return u===2?1:u===4?-1:0}function ht(t){t.preventDefault!==void 0&&t.cancelable&&t.preventDefault()}function G(t){var n=t.sortable,o=t.name,r=t.evt,u=n.options[o];if(typeof u=="function")return u(J({},r))}function dt(t){if(typeof t=="function"){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return t.apply(void 0,o)}return t}var q="Sortable"+Date.now();function Ot(t){this.options=t,this.scrollEl=null,this.autoScrollInterval=null}function Dt(t){this.options=t,this.animationStack=[],this.animationCallbackId=null}function bt(t,n){return Math.sqrt(Math.pow(t.left-n.left,2)+Math.pow(t.top-n.top,2))}Ot.prototype={nulling:function(){this.autoScrollInterval&&(clearInterval(this.autoScrollInterval),this.autoScrollInterval=null)},onStarted:function(){this.nulling(),this.autoScrollInterval=setInterval(this.autoScroll.bind(this))},onMove:function(t,n,o,r){var u=o?o[q].options:r;!o||u.autoScroll?(this.options=u,this.scrollEl=function(h,f){if(!h||!h.getBoundingClientRect)return pt();var d=h,m=!1;do if(d.clientWidth<d.scrollWidth||d.clientHeight<d.scrollHeight){var I=E(d);if(d.clientWidth<d.scrollWidth&&(I.overflowX=="auto"||I.overflowX=="scroll")||d.clientHeight<d.scrollHeight&&(I.overflowY=="auto"||I.overflowY=="scroll")){if(!d.getBoundingClientRect||d===document.body)return pt();if(m||f)return d;m=!0}}while(d=d.parentNode);return pt()}(t,!0),this.moveEvent=n):this.scrollEl=null},autoScroll:function(){var t=this.options,n=this.moveEvent,o=this.scrollEl,r=t.scrollThreshold,u=t.scrollSpeed;if(o&&n.clientX!==void 0&&n.clientY!==void 0){var h=X(o);if(h){var f=n.clientX,d=n.clientY,m=h.top,I=h.right,T=h.bottom,C=h.left,R=h.height,W=h.width;if(!(d<m||f>I||d>T||f<C)){var Z=o.scrollTop,H=o.scrollLeft,rt=o.scrollHeight,lt=o.scrollWidth;o.scrollLeft+=this.getScrollOffset(f,C,I,r,u.x,H,lt,W),o.scrollTop+=this.getScrollOffset(d,m,T,r,u.y,Z,rt,R)}}}},getScrollOffset:function(t,n,o,r,u,h,f,d){return h>0&&t>=n&&t<=n+r?Math.max(-1,(t-n)/r-1)*u:h+d<f&&t<=o&&t>=o-r?Math.min(1,(t-o)/r+1)*u:0}},Dt.prototype={collect:function(t){if(t){for(var n=X(t),o=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,u=Math.min(n.right,o),h=Math.min(n.bottom,r),f=Array.prototype.slice.call(t.children),d=[],m=0,I=f.length;m<I;m++){var T=f[m];if(T!==M.ghost&&E(T,"display")!=="none"){var C=X(T);if(!(C.bottom<0||C.right<0)){if(d.length===0&&T.previousElementSibling){var R=T.previousElementSibling;do if(R&&R!==M.ghost&&E(R,"display")!=="none")break;while(R=R.previousElementSibling);R&&d.push({el:R,rect:X(R)})}if(C.top-C.height>h||C.left-C.width>u){d.push({el:T,rect:C});break}d.push({el:T,rect:C})}}}this.animationStack.push(d)}},animate:function(t){var n=this,o=this.animationStack.pop(),r=this.options.animation;if(!o||!r)return clearTimeout(this.animationCallbackId),void(typeof t=="function"&&t());var u=0;o.forEach(function(h){var f=0,d=h.el,m=X(d),I=h.rect,T=d.prevToRect,C=d.prevFromRect;if(d.animating&&C&&T&&Ct(I,m)){var R=function(W,Z){var H="";if(typeof W=="string")H=W;else do{var rt=E(W,"transform");rt&&rt!=="none"&&(H=rt+" "+H)}while(!Z&&(W=W.parentNode));var lt=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return lt&&new lt(H)}(d,!0);R&&(f=bt({top:m.top-R.f,left:m.left-R.e},m)/bt(C,T)*r)}Ct(I,m)||(d.prevFromRect=I,d.prevToRect=m,f||(f=r),n.execute(d,I,m,f)),f&&(u=Math.max(u,f))}),clearTimeout(this.animationCallbackId),u?this.animationCallbackId=setTimeout(function(){typeof t=="function"&&t()},u):typeof t=="function"&&t()},execute:function(t,n,o,r){var u=this.options.easing||"",h=n.left-o.left,f=n.top-o.top;E(t,"transition",""),E(t,"transform","translate3d(".concat(h,"px, ").concat(f,"px, 0)")),this.repaintDummy=function(d){return d.offsetWidth}(t),E(t,"transition","transform ".concat(r,"ms ").concat(u)),E(t,"transform","translate3d(0px, 0px, 0px)"),typeof t.animating=="number"&&clearTimeout(t.animating),t.animating=setTimeout(function(){E(t,"transition",""),E(t,"transform",""),t.prevFromRect=null,t.prevToRect=null,t.animating=null},r)}};var nt,P,w,x,ot,L,S,l,s,e,i,a,c,p,v,y,D,$,U,j,it,ft=[];function kt(t){var n,o,r,u={},h=t.group;h&&O(h)==="object"||(h={name:h,pull:!0,put:!0,revertDrag:!0}),u.name=h.name,u.pull=(n=h.pull)===null||n===void 0||n,u.put=(o=h.put)===null||o===void 0||o,u.revertDrag=(r=h.revertDrag)===null||r===void 0||r,t.group=u}function M(t,n){if(!t||!t.nodeType||t.nodeType!==1)throw"Sortable-dnd: `el` must be an HTMLElement, not ".concat({}.toString.call(t));t[q]=this,this.el=t,this.options=n=J({},n);var o={store:null,group:"",handle:null,draggable:">*",sortable:!0,disabled:!1,customGhost:null,lockAxis:"",direction:"",animation:150,easing:"",chosenClass:"",placeholderClass:"",ghostClass:"",ghostStyle:{},ghostContainer:null,appendToBody:!1,autoScroll:!0,scrollThreshold:55,scrollSpeed:{x:10,y:10},delay:0,delayOnTouchOnly:!1,swapOnDrop:!0,removeCloneOnDrop:!0,dropOnAnimationEnd:!1,supportTouch:"ontouchstart"in window,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,emptyInsertThreshold:-1};for(var r in o)!(r in n)&&(n[r]=o[r]);for(var u in kt(n),this)u.charAt(0)==="_"&&typeof this[u]=="function"&&(this[u]=this[u].bind(this));_(t,n.supportTouch?"touchstart":"mousedown",this._onDrag),this.autoScroller=new Ot(n),this.animator=new Dt(n),ft.push(t)}return M.prototype={constructor:M,_onDrag:function(t){var n=this,o=this.el,r=this.options,u=r.handle,h=t.touches&&t.touches[0],f=(h||t).target,d=o.ownerDocument;if(!w&&!r.disabled&&r.group.pull&&!(/mousedown|pointerdown/.test(t.type)&&t.button!==0||N&&f&&f.tagName.toUpperCase()==="SELECT")){var m=ut(f,r.draggable,o);m&&!m.animating&&(v={event:t,clientX:(h||t).clientX,clientY:(h||t).clientY},w=m,_($=h?w:document,"mouseup",this._onDrop),_($,"touchend",this._onDrop),_($,"touchcancel",this._onDrop),typeof u=="function"&&!u(t)||typeof u=="string"&&!ut(f,u,w)||(!r.delay||r.delayOnTouchOnly&&!h||Et||et?this._onStart(h,t):(_(d,"touchmove",this._delayedMoveHandler),_(d,"mousemove",this._delayedMoveHandler),_(d,"mouseup",this._cancelStart),_(d,"touchend",this._cancelStart),_(d,"touchcancel",this._cancelStart),this._dragStartTimer=setTimeout(function(){return n._onStart(h,t)},r.delay))))}},_delayedMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-v.clientX),Math.abs(n.clientY-v.clientY))>=Math.floor(this.options.touchStartThreshold/(window.devicePixelRatio||1))&&this._cancelStart()},_cancelStart:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),b(t,"touchmove",this._delayedMoveHandler),b(t,"mousemove",this._delayedMoveHandler),b(t,"mouseup",this._cancelStart),b(t,"touchend",this._cancelStart),b(t,"touchcancel",this._cancelStart)},_onStart:function(t,n){ht(n);var o=this.el,r=this.options,u=F(w);a=u,c=u,p=u,nt=o,P=o,L=o,s=w,e=w.parentNode,i=r.group.pull,j=w,U={to:o,target:w,newIndex:u,relative:0},S=w.cloneNode(!0),M.dragged=w,M.clone=S,M.active=this,G({sortable:this,name:"onChoose",evt:this._getEventProperties(n)}),Q(w,r.chosenClass,!0),_($,t?"touchmove":"mousemove",this._nearestSortable);try{document.selection?setTimeout(function(){return document.selection.empty()},0):window.getSelection().removeAllRanges()}catch(h){}_(document,"selectstart",ht),N&&E(document.body,"user-select","none")},_onStarted:function(){var t=this.options;this.animator.collect(e),this._appendGhost(),Q(S,t.chosenClass,!0),Q(S,t.placeholderClass,!0),w.parentNode.insertBefore(S,w),E(w,"display","none"),G({sortable:this,name:"onDrag",evt:this._getEventProperties(v.event)}),this.animator.animate(),this.autoScroller.onStarted()},_appendGhost:function(){if(!l){var t=this.options,n=t.appendToBody?document.body:dt(t.ghostContainer,this)||this.el,o=dt(t.customGhost,S)||S;Q(l=o.cloneNode(!0),t.ghostClass,!0);var r=X(w),u=J({position:"fixed",top:r.top,left:r.left,width:r.width,height:r.height,margin:0,zIndex:1e5,opacity:"0.8",overflow:"hidden",boxSizing:"border-box",transform:"",transition:"",pointerEvents:"none"},t.ghostStyle);for(var h in u)E(l,h,u[h]);M.ghost=l,n.appendChild(l);var f=(v.clientX-r.left)/parseInt(l.style.width)*100,d=(v.clientY-r.top)/parseInt(l.style.height)*100;E(l,"transform-origin","".concat(f,"% ").concat(d,"%")),E(l,"will-change","transform")}},_nearestSortable:function(t){ht(t);var n=t.touches&&t.touches[0]||t;if(w&&function(R){var W=y||v;return!(R.clientX!==void 0&&R.clientY!==void 0&&Math.abs(R.clientX-W.clientX)<=0&&Math.abs(R.clientY-W.clientY)<=0)}(n)){!y&&this._onStarted();var o=this.options.lockAxis,r=o==="x"?v.clientX:n.clientX,u=o==="y"?v.clientY:n.clientY,h=document.elementFromPoint(r,u),f=r-v.clientX,d=u-v.clientY;y={event:t,clientX:r,clientY:u},E(l,"transform","translate3d(".concat(f,"px, ").concat(d,"px, 0)"));var m,I,T,C=(m=r,I=u,ft.reduce(function(R,W){var Z=W[q].options.emptyInsertThreshold;if(Z!=null){var H=X(W),rt=m>=H.left-Z&&m<=H.right+Z,lt=I>=H.top-Z&&I<=H.bottom+Z;return rt&&lt&&(!T||T&&H.left>=T.left&&H.right<=T.right&&H.top>=T.top&&H.bottom<=T.bottom)&&(R=W,T=H),R}},null));C&&C[q]._onMove(t,h),this.autoScroller.onMove(h,y,C,this.options)}},_allowPut:function(){var t=this.options.group,n=L[q].options.group;return this.el===L||!!t.put&&(t.put.join&&t.put.indexOf(n.name)>-1||n.name&&t.name&&n.name===t.name)},_getDirection:function(){var t=this.options.draggable,n=this.options.direction;return n?dt(n,y.event,S,this):yt(e,t)},_allowSwap:function(){var t=X(x),n=this._getDirection()==="vertical",o=n?"top":"left",r=n?"bottom":"right",u=x[n?"offsetHeight":"offsetWidth"],h=n?y.clientY:y.clientX,f=h>=t[o]&&h<t[r]-u/2?-1:1,d=mt(e,0,this.options.draggable),m=It(e),I=X(d),T=X(m);if(x===e||gt(e,x))return S===d&&h<I[o]?(ot=x,!0):S===m&&h>T[r]&&(ot=x.nextSibling,!0);var C=St(S,x);return ot=C<0?x.nextSibling:x,D!==x?(it=f,!0):it!==f&&(it=f,f<0?C>0:C<0)},_onMove:function(t,n){var o=this.el,r=this.options;if(!r.disabled&&this._allowPut()){if(x=ut(n,r.draggable,o),G({sortable:this,name:"onMove",evt:this._getEventProperties(t,{target:x})}),r.sortable||o!==L)return o===P||n!==o&&It(o)?void(x&&!x.animating&&!gt(x,S)&&this._allowSwap()&&(x!==S&&ot!==S&&(o!==P?this._onInsert(t):x!==w&&this._onChange(t)),D=x)):(x=D=null,void this._onInsert(t));P!==L&&(x=D=w,it=0,this._onInsert(t))}},_onInsert:function(t){var n=this.el,o=x||S,r=i==="clone"&&n!==L&&P===L,u=i==="clone"&&n===L&&P!==L,h=gt(x,document),f=x===w&&!h,d=P[q],m=L[q];nt=n,a=F(S),s=o,e=h?x.parentNode:n,d.animator.collect(S.parentNode),this.animator.collect(e),r&&(U.target=j,U.newIndex=a,U.relative=j===w?0:St(S,j),E(w,"display",""),m.options.group.revertDrag||S.parentNode.insertBefore(w,S)),u&&(a=F(w),E(w,"display","none")),E(S,"display",f?"none":""),x&&h?e.insertBefore(S,it<0?x:x.nextSibling):e.appendChild(S),c=f?p:F(S),r&&m.options.group.revertDrag&&(U.target=w,U.newIndex=p,U.relative=0,G({sortable:m,name:"onChange",evt:this._getEventProperties(t,{to:L,target:w,newIndex:p,revertDrag:!0})})),r||G({sortable:d,name:"onRemove",evt:this._getEventProperties(t,{newIndex:-1})}),u&&o!==w&&(j=o,G({sortable:this,name:"onChange",evt:this._getEventProperties(t,{from:L,backToOrigin:!0})})),u||G({sortable:this,name:"onAdd",evt:this._getEventProperties(t,{oldIndex:-1})}),d.animator.animate(),this.animator.animate(),P=n},_onChange:function(t){var n=this.el;this.animator.collect(e),a=F(S),e=x.parentNode,s=x,n===L&&(j=x),e.insertBefore(S,ot),c=F(S),G({sortable:this,name:"onChange",evt:this._getEventProperties(t)}),this.animator.animate(),P=n},_onDrop:function(t){var n=this,o=this.options;if(this._cancelStart(),b($,"touchmove",this._nearestSortable),b($,"mousemove",this._nearestSortable),b($,"mouseup",this._onDrop),b($,"touchend",this._onDrop),b($,"touchcancel",this._onDrop),b(document,"selectstart",ht),N&&E(document.body,"user-select",""),l&&l.parentNode&&l.parentNode.removeChild(l),L)if(P=L,a=p,s===S&&(s=w),Q(w,o.chosenClass,!1),G({sortable:this,name:"onUnchoose",evt:this._getEventProperties(t)}),y){this.animator.collect(e),Q(S,o.chosenClass,!1),Q(S,o.placeholderClass,!1);var r=this._getEventProperties(t);!o.dropOnAnimationEnd&&this._onEnd(r),this.animator.animate(function(){o.dropOnAnimationEnd&&n._onEnd(r)})}else this._nulling();else this._nulling()},_onEnd:function(t){var n=this.options,o=i==="clone",r=P===nt;o&&!r||!dt(n.swapOnDrop,t)||e.insertBefore(w,S),o&&!r||!dt(n.removeCloneOnDrop,t)||S&&S.parentNode&&S.parentNode.removeChild(S),E(w,"display",""),P!==nt&&G({sortable:P[q],name:"onDrop",evt:J({},t,o?U:{newIndex:-1})}),G({sortable:nt[q],name:"onDrop",evt:J({},t,r?{}:{oldIndex:-1})}),this._nulling()},_getEventProperties:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o={};return o.event=t,o.to=nt,o.from=P,o.node=w,o.clone=S,o.target=s,o.oldIndex=a,o.newIndex=c,o.pullMode=i,J(o,n),o.relative=s===w?0:St(S,s),o},_nulling:function(){nt=P=w=x=ot=L=S=l=s=e=i=a=c=p=v=y=D=$=U=j=it=M.clone=M.ghost=M.active=M.dragged=null,this.autoScroller.nulling()},destroy:function(){this._cancelStart(),this._nulling(),b(this.el,"touchstart",this._onDrag),b(this.el,"mousedown",this._onDrag);var t=ft.indexOf(this.el);t>-1&&ft.splice(t,1),this.el[q]=this.animator=this.autoScroller=null},option:function(t,n){if(n===void 0)return this.options[t];this.options[t]=n,this.animator.options[t]=n,this.autoScroller.options[t]=n,t==="group"&&kt(this.options)}},M.utils={on:_,off:b,css:E,index:F,matches:st,closest:ut,getRect:X,toggleClass:Q,detectDirection:yt},M.get=function(t){return t[q]},M.create=function(t,n){return new M(t,n)},M})}}]);
